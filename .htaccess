# Apache Configuration for PWA
<IfModule mod_rewrite.c>
    RewriteEngine On
    
    # Redirect manifest.json to manifest.php (for backward compatibility)
    RewriteRule ^manifest\.json$ manifest.php [L]
    
    # Ensure manifest.php is served with correct content type
    <FilesMatch "manifest\.php$">
        Header set Content-Type "application/manifest+json"
    </FilesMatch>
</IfModule>

# Security Headers
<IfModule mod_headers.c>
    # PWA requires HTTPS (except localhost)
    Header always set Strict-Transport-Security "max-age=31536000; includeSubDomains" env=HTTPS
    
    # Service Worker scope
    Header set Service-Worker-Allowed "/"
</IfModule>

# Enable CORS for service worker (if needed)
<IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "*"
    Header set Access-Control-Allow-Methods "GET, POST, OPTIONS"
    Header set Access-Control-Allow-Headers "Content-Type"
</IfModule>

# Cache Control
<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresByType application/manifest+json "access plus 1 day"
    ExpiresByType text/javascript "access plus 1 month"
    ExpiresByType application/javascript "access plus 1 month"
    ExpiresByType text/css "access plus 1 month"
    ExpiresByType image/png "access plus 1 year"
    ExpiresByType image/jpeg "access plus 1 year"
    ExpiresByType image/jpg "access plus 1 year"
</IfModule>
